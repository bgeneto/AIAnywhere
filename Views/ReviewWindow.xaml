<Window x:Class="AIAnywhere.Views.ReviewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="AI Result Preview" 
        Width="640" Height="640"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize" MinHeight="320" MinWidth="480"
        Topmost="True" ShowInTaskbar="False"
        Icon="../AIAnywhere.ico">
    
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header with animated icon -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Ellipse Grid.Column="0" Width="40" Height="40" Margin="0,0,12,0">
                <Ellipse.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#4CAF50" Offset="0"/>
                        <GradientStop Color="#45A049" Offset="1"/>
                    </LinearGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            
            <TextBlock Grid.Column="0" Text="✓  " FontSize="24" Foreground="White" 
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
              <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock Text="AI Result Ready" FontSize="16" FontWeight="Bold" 
                           Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
                <TextBlock Name="OperationTypeTextBlock" Text="Text Translation" 
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" FontSize="12"/>
            </StackPanel>
        </Grid>          <!-- Preview Content -->
        <Border Grid.Row="1" BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}" BorderThickness="1" 
                Background="{DynamicResource SystemControlBackgroundAltHighBrush}" CornerRadius="8" Padding="16">            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                <Grid>                    <!-- Text Content - Now selectable -->
                    <TextBox Name="ResultTextBox" 
                             TextWrapping="Wrap" 
                             IsReadOnly="True"
                             BorderThickness="0"
                             Background="Transparent"
                             FontFamily="Segoe UI, Tahoma, Geneva, Verdana, sans-serif" 
                             FontSize="14"
                             Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                             Padding="0"
                             Margin="0"
                             VerticalScrollBarVisibility="Disabled"
                             HorizontalScrollBarVisibility="Disabled"
                             AcceptsReturn="True"
                             IsTabStop="True">
                        <TextBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="📋 _Copy Selected" Click="CopySelectedMenuItem_Click" 
                                          InputGestureText="Ctrl+C"/>
                                <MenuItem Header="📄 Copy _All" Click="CopyAllMenuItem_Click" 
                                          InputGestureText="Ctrl+A, Ctrl+C"/>
                                <Separator/>
                                <MenuItem Header="🔍 _Select All" Click="SelectAllMenuItem_Click" 
                                          InputGestureText="Ctrl+A"/>
                            </ContextMenu>
                        </TextBox.ContextMenu>
                        <TextBox.Resources>
                            <!-- Remove default TextBox selection color and use system selection -->
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" 
                                             Color="{DynamicResource SystemAccentColor}" Opacity="0.4"/>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" 
                                             Color="{DynamicResource SystemBaseHighColor}"/>
                        </TextBox.Resources>
                    </TextBox>
                    
                    <!-- Image Content -->
                    <Image Name="ResultImage" Visibility="Collapsed" 
                           Stretch="Uniform" MaxWidth="600" MaxHeight="400"
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    
                    <!-- Loading Panel for Images -->
                    <StackPanel Name="LoadingPanel" Visibility="Collapsed" 
                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                Margin="20">
                        <Ellipse Width="40" Height="40" Margin="0,0,0,12">
                            <Ellipse.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#4CAF50" Offset="0"/>
                                    <GradientStop Color="#45A049" Offset="1"/>
                                </LinearGradientBrush>
                            </Ellipse.Fill>
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="LoadingRotateTransform" CenterX="20" CenterY="20"/>
                            </Ellipse.RenderTransform>
                        </Ellipse>
                        <TextBlock Text="🖼️ Loading image..." FontSize="16" FontWeight="SemiBold"
                                   HorizontalAlignment="Center" Margin="0,0,0,8"
                                   Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
                        <TextBlock Text="Please wait while we download and prepare your image..." 
                                   FontSize="12" HorizontalAlignment="Center"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    </StackPanel>
                </Grid>
            </ScrollViewer>
        </Border>
        
        <!-- Status bar -->
        <Grid Grid.Row="2" Margin="0,12,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Name="CharacterCountTextBlock" 
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" FontSize="11"
                       Text="0 characters"/>
            
            <TextBlock Grid.Column="2" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" FontSize="11"
                       Text="Press Enter to paste, Esc to cancel"/>
        </Grid>
        
        <!-- Action Buttons -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Copy to Clipboard button -->
            <Button Grid.Column="0" Name="CopyButton" Content="📋 Copy to Clipboard" 
                    Style="{StaticResource SecondaryButton}" HorizontalAlignment="Left"
                    Click="CopyButton_Click" Margin="0,0,12,0"/>
            
            <!-- Main action buttons -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button Name="PasteButton" Content="✓ Paste" 
                        Style="{StaticResource SuccessButton}"
                        Margin="0,0,12,0" Click="PasteButton_Click" 
                        IsDefault="True" MinWidth="80"/>
                <Button Name="CancelButton" Content="✕ Cancel" 
                        Style="{StaticResource DangerButton}"
                        Click="CancelButton_Click" IsCancel="True" MinWidth="80"/>
            </StackPanel>
        </Grid>
    </Grid>
      <!-- Animations -->
    <Window.Resources>
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                             From="0" To="1" Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)" 
                             From="0.95" To="1" Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" 
                             From="0.95" To="1" Duration="0:0:0.3"/>
        </Storyboard>
        
        <Storyboard x:Key="LoadingAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="LoadingRotateTransform"
                             Storyboard.TargetProperty="Angle"
                             From="0" To="360" Duration="0:0:1.5"/>
        </Storyboard>
    </Window.Resources>
    
    <Window.RenderTransform>
        <ScaleTransform/>
    </Window.RenderTransform>
</Window>
